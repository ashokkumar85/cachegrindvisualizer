<?xml version="1.0" encoding="utf-8"?>
<mx:ApolloApplication xmlns:mx="http://www.adobe.com/2006/mxml" showStatusBar="false" paddingBottom="5" paddingLeft="5" paddingTop="5" paddingRight="5" creationComplete="handleCreationComplete()">

	<mx:Style source="C:\flex\framework\style.css"/>
	
	<mx:ApplicationControlBar width="100%">
		<mx:Button label="@Resource('open')" click="browse()"/>
	</mx:ApplicationControlBar>
	<mx:TabNavigator id="tabNavigator" width="100%" height="100%">

	</mx:TabNavigator>
	
	<mx:Script><![CDATA[		
		
	import flash.filesystem.File;
	
	import flash.system.System;
	import develar.formatters.Formatter;
	
	import mx.resources.ResourceBundle;
	
	import develar.cachegrindVisualizer.ui.Tab;
	
	private var file:File = new File();
	private var fileFilters:Array = [new FileFilter(ResourceBundle.getResourceBundle('CachegrindVisualizer').getString('cachegrindFiles'), 'cachegrind.out.*'), new FileFilter(ResourceBundle.getResourceBundle('CachegrindVisualizer').getString('allFiles'), '*')];
	
	private function browse():void
	{
		file.browse(fileFilters);
	}
	
	private function handleCreationComplete():void
	{
		file.addEventListener(Event.SELECT, handleSelectFile);
		window.maximize();
	}
	
	private function handleSelectFile(event:Event):void
	{	
		var tab:Tab = new Tab();	
		tabNavigator.addChild(tab);
		tab.file = File(event.target);
	}
	
	]]></mx:Script>	
	
</mx:ApolloApplication>